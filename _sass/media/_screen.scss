* {
    @include box-sizing(border-box);
}

@include establish-baseline;

html {
    background-color: $complementary-color;
}

body {
    font-family: $default-font;
    color: $default-color;
    @include container;
}

a {
    @include link-colors(
        $link-color,
        $link-hover-color,
        $link-active-color,
        $link-visited-color,
        $link-focus-color
    );

    @include transition(
        color $default-transition-duration,
        background-color $default-transition-duration
    );

    &:before {
        @include single-transition(color);
    }

    img {
        @include single-transition(opacity);
    }
}

#{headings()} {
    font-family: $sans-serif;

    a {
        text-decoration:none;
    }
}

h1,h2 {
    clear:both;
    text-align:center;
    text-transform:uppercase;
    letter-spacing: 3px;

    &:before {
        display:block;
        width: column(12);
        height: 5px;
        background: $complementary-color;
        margin: 0 auto 0.2em;
        content: " ";
    }

}

h1 {
    @include adjust-font-size-to(54px);
    @include adjust-leading-to(2,54px);
}

h2 {
    @include adjust-font-size-to(24px);
    @include leader(2, 24px);
    color: $default-color-lighter;
    font-style:italic;

    h1 + &,
    h1 ~ * &:first-child {
        @include leader(1, 24px);
    }

}

h3 {
    @include adjust-font-size-to(20px);
    color: $default-color-light;
    font-weight:normal;
    @include leader(2, 20px);

    h2 + & {
        @include leader(1, 20px);
    }
}

h4 {
    @include adjust-font-size-to($base-font-size);
    @include leader(2);
    h3 + & {
        @include leader(1);
    }
}

h5 {
    @include adjust-font-size-to($base-font-size);
    color: $default-color-light;
    @include leader(2);
    h4 + & {
        @include leader(1);
    }
}

h6 {
    @include adjust-font-size-to($base-font-size);
    font-style:italic;
    color: $default-color-light;
    @include leader(2);
    h5 + & {
        @include leader(1);
    }
}

#{headings(3,6)} {
    + p {
        margin-top:0;
    }
}

p {
    margin: rhythm(1) 0;

    &:last-child {
        margin: rhythm(1) 0 0;
    }

}

blockquote {
    margin:0;
    @include adjust-font-size-to(20px);
    font-style:italic;

    figure & {
        text-align:left;
    }

    & + figcaption {
        margin-left: rhythm(1.25, 14px);
        text-align:left;
    }

    & :last-child {
        margin-bottom:0;
    }
}

dl {
  margin: rhythm(1) 0;
}

dt {
    font-weight:bold;
}

dd {
    margin: 0 0 rhythm(1) rhythm(1);
}

ul {
    list-style:disc;
}

ol {
    list-style:decimal;
}

ul,ol {
    padding:0;
    margin: rhythm(1) 0 rhythm(1) rhythm(1);

    nav & {
        margin-left:0;
    }

    ul {
        list-style: circle;
    }

    ol {
        list-style: upper-alpha;
    }

    ul, ol {
        margin: 0 0 0 rhythm(1);

        ul {
            list-style:square;
        }

        ol {
            list-style:lower-alpha;
        }
    }
}

table {
    border-collapse:collapse;
    border-spacing:0;
}

th,
td {
    padding: rhythm(1) rhythm(0.5) 0;
    @include trailing-border(1px);
    border-color: rgba($default-color,.2);
}

th {
    @include trailing-border(3px);
    text-align:left;
}

img {
    max-width:100%;
    width:auto;
    height:auto;
}

code {
    font-family: monospace;
    color: $code-color;
}

del {
    color: $default-color-lighter;
}

ins {
    text-decoration:none;
    background: $ins-color;
}

address {
    font-style:normal;
    margin: rhythm(1) 0;
}

br {
    margin:0;
    line-height:0;
}

hr {
    border:none;
    text-align:center;
    &:before {
        display:block;
        content: " · · · · · ";
        color: rgba($default-color-light, 0.5);
    }
}

.visuallyhidden {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
}

#skiplink {
    @extend .visuallyhidden;
}

.rotunda {
    display:block;
    width: rhythm(1.5);
    height: rhythm(1.5);
    @include border-radius(rhythm(.75));
    @include background(
        linear-gradient(left, color-stops(transparent 0, transparent 50%, rgba(white, 0.125) 50%, rgba(white, 0.0125) 100%)) repeat-y,
        $base-color
    );

    background-size: 100% 1px, auto;
    padding: rhythm(.35);

    img {
        margin-top: -1px;
    }
}

.gallery {
    display:block;
    @include clearfix;
    clear:both;
    background-color: $base-color-darker;
    padding:0;
    ul {
        list-style:none;
        padding:0;
        margin:0;
    }

    li {
        float: left;
        @include span-columns(6);
        margin-bottom:0;
        @include background(
            url(http://farm4.staticflickr.com/3746/10510531524_2d2e71b132_h.jpg)
        );

        background-size:cover;        

        &:nth-child(2n) {
            @include background-image(
                url(http://farm5.staticflickr.com/4059/4572580724_881dee4395_z.jpg)
            );
        }

        &:nth-child(3n) {
            @include background-image(
                url(http://farm5.staticflickr.com/4034/4572592006_54e54ee883_z.jpg)
            );
        }

        &:nth-child(2n) {
            @include background-image(
                url(http://farm4.staticflickr.com/3745/10510409804_beb855d5eb_h.jpg)
            );
        }

        &:nth-child(3n) {
            @include background-image(
                url(http://farm6.staticflickr.com/5502/10510360734_1779edabad_h.jpg)
            );

        }
        &:nth-child(4n) {
            @include background-image(
                url(http://farm6.staticflickr.com/5485/10510343255_39ee93be2e_h.jpg)
            );

        }

        &:nth-child(5n) {
            @include background-image(
                url(http://farm3.staticflickr.com/2877/10510649343_6accef8c17_h.jpg)
            );
        }
        &:nth-child(6n) {
            @include background-image(
                url(http://farm4.staticflickr.com/3745/10510409804_beb855d5eb_h.jpg)
            );
        }

    }

    a {
        display:block;
        text-align:right;
        text-decoration:none;
        vertical-align:bottom;
        background: rgba(desaturate($complementary-color, 50), 0.75);
        color: #fff;
        padding: rhythm(1) rhythm(1) rhythm(4);
        max-height: rhythm(6);
        &:hover,
        &:focus {
            background: rgba(desaturate($complementary-color, 50), 0.25);
        }

        h2 {
            &:before {
                display:none;
            }
            margin:0;
            font-style:normal;
            @include adjust-font-size-to(28px);
            color:white;
            text-align:inherit;
        }
        p {
            margin:0;
            color: white;
            color: rgba(white, 0.8);
            @include adjust-font-size-to(14px);
            @include adjust-leading-to(0.5,14px);
        }
    }
}

#uva-link {
    text-align:center;
    margin: 0 auto rhythm(1);
    display:block;

    .rotunda {
        margin:0 auto rhythm(0.5);
    }
}

header[role=banner] {
    z-index:1;
    display:block;
    position:relative;
    @include bleed();
    padding: rhythm(1) gutter(12);

    .home & {
        padding: rhythm(4) gutter(12);
    }

    @include background(
        linear-gradient(left, color-stops(transparent, rgba(white, 0.05))),
        $complementary-color
    );
    
    background-size: 50% 100px, auto;

    h1 {
        margin:0;
        abbr {
            border:none;
            font-variant:small-caps;
        }
        @include adjust-font-size-to(18px);

        &:before {
            display:none;
        }

        .home & {
            @include adjust-font-size-to(54px);
        }
    }

    a {
        text-decoration:none;

        &:link,
        &:visited {
            color: rgba(white, 0.9);
        }

        &:hover,
        &:focus {
            color: rgba(white, 0.95);
        }

        &:active {
            color: white;
        }
    }
}

main {
    z-index:100;
    position:relative;
}

section {
    @include bleed;
    @include pad(4,4);
    padding-top: rhythm(2);
    padding-bottom: rhythm(2);
    background-color: #fff;
    h1 {
        margin-top:0;
    }

}

figure {

    &.quote {
        @include bleed;
        background: darken($base-color, 20);
        color: white;
        color: rgba(white, 0.8);
        padding-top: rhythm(2);
        padding-bottom: rhythm(2);

        blockquote {
            @include adjust-font-size-to(32px);
            @include adjust-leading-to(1.5, 32px);
            margin:0;
        }

        p {
            margin:0;
            @include pad(2,2);
        }

    }
}

#introduction {
    h1 {
        @extend .visuallyhidden;
        margin:0;
    }

    p {
        margin:0;
        @include adjust-font-size-to(36px);
        @include adjust-leading-to(2,36px);
        font-style:italic;
        text-align:center;
    }
}

#categories {
    padding-top:0;
    padding-bottom:0;
    @include clearfix;
    background-color: white;
    @include susy-grid-background;
    
}

#contact {
    background-color: lighten($complementary-color, 10%);
    color: #fff;
}

.profile main header {
    @include bleed;
    @include background(
        linear-gradient(left, color-stops(transparent 0, rgba(white, 0.2) 50%, rgba(white, 0.1) 50%, transparent 100%)) bottom left no-repeat,    
        url(http://farm4.staticflickr.com/3746/10510531524_2d2e71b132_h.jpg) fixed no-repeat
    );
    background-color: darken($base-color, 40);
    background-size: auto, cover;
    background-position:inherit;

    color: #fff;
    color: rgba(white, 0.8);

    h1:before {
        display:none;
    }
}

article header {
    
    padding-top: rhythm(2);
    padding-bottom: rhythm(4);

    h1 {
        margin:0;
    }
}


footer[role=contentinfo] {
    @include bleed;
    color: white;
    color: rgba(white, 0.8);
    font-family: $sans-serif;

    p {
        @include adjust-font-size-to(16px);
        @include adjust-leading-to(1,16px);
        @include leader(1,16px);
        @include trailer(1,16px);
    }
}
